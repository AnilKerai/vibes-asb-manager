<MudPaper Class="pa-3 mt-3" Elevation="1">
    <div class="d-flex align-center mb-2" style="gap:8px;">
        <MudText Typo="Typo.h6">Active Messages</MudText>
        <MudSpacer />
        <MudButton Variant="Variant.Outlined" Disabled="@(!CanRefresh)" OnClick="@OnRefresh">
            <MudIcon Icon="@Icons.Material.Filled.Refresh" />
            <span class="ms-1">Refresh</span>
        </MudButton>
    </div>
    <MudTable T="MessagePreview" Items="Items" Dense="true" Hover="true" Elevation="0" OnRowClick="@OnRowClick">
        <HeaderContent>
            <MudTh>Seq</MudTh>
            <MudTh>Enqueued</MudTh>
            <MudTh>MessageId</MudTh>
            <MudTh>Subject</MudTh>
            <MudTh>CorrelationId</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Seq">@context.SequenceNumber</MudTd>
            <MudTd DataLabel="Enqueued">@context.EnqueuedTime.LocalDateTime.ToString("yyyy-MM-dd HH:mm:ss")</MudTd>
            <MudTd DataLabel="MessageId">@context.MessageId</MudTd>
            <MudTd DataLabel="Subject">@context.Subject</MudTd>
            <MudTd DataLabel="CorrelationId">@context.CorrelationId</MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager PageSizeOptions="new int[] { 10, 15, 25, 50 }" />
        </PagerContent>
    </MudTable>
</MudPaper>

@code {
    [Parameter] public IReadOnlyList<MessagePreview>? Items { get; set; }
    [Parameter] public bool CanRefresh { get; set; }
    [Parameter] public EventCallback OnRefresh { get; set; }
    [Parameter] public EventCallback<TableRowClickEventArgs<MessagePreview>> OnRowClick { get; set; }
}
